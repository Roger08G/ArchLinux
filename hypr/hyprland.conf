###############################################################
# 🧭 HYPRLAND CONFIGURACIÓN PRINCIPAL
# Autor: Tu Setup Arch + Hyprland
# Tema: Nord (minimal, limpio, fluido)
# Descripción:
#   - Integración total con Dunst, Kanshi, Kitty, Rofi, Waypaper,
#     Swaylock y Wlogout
#   - Animaciones suaves + blur + consistencia visual
###############################################################

# ───────────────────────────────────────────────
# 🌐 MONITORES
# ───────────────────────────────────────────────
# "monitor=<nombre>,<modo>,<posición>,<escala>"
# Ejemplo: monitor=eDP-1,1920x1080@60,0x0,1
monitor=,preferred,auto,1

# ───────────────────────────────────────────────
# 🧰 VARIABLES DE ENTORNO
# ───────────────────────────────────────────────
env = XDG_CURRENT_DESKTOP,Hyprland
env = XDG_SESSION_TYPE,wayland
env = QT_QPA_PLATFORM,wayland
env = GDK_BACKEND,wayland
env = SDL_VIDEODRIVER,wayland
env = CLUTTER_BACKEND,wayland
env = WLR_NO_HARDWARE_CURSORS,1

# ───────────────────────────────────────────────
# 🖱️ ENTRADA (TECLADO / RATÓN / TOUCHPAD)
# ───────────────────────────────────────────────
input {
    kb_layout = es
    kb_options = caps:escape
    follow_mouse = 1
    sensitivity = 0
    touchpad {
        natural_scroll = true
        tap-to-click = true
    }
}

# ───────────────────────────────────────────────
# 🧱 DISEÑO GENERAL
# ───────────────────────────────────────────────
general {
    gaps_in = 8
    gaps_out = 15
    border_size = 2
    col.active_border = rgb(88c0d0)
    col.inactive_border = rgb(3b4252)
    layout = dwindle
    resize_on_border = true
}

# ───────────────────────────────────────────────
# 🌈 DECORACIONES
# ───────────────────────────────────────────────
decoration {
    rounding = 12
    blur = true
    blur_size = 6
    blur_passes = 2
    drop_shadow = yes
    shadow_range = 12
    shadow_render_power = 3
    col.shadow = rgba(0,0,0,0.35)
}

# ───────────────────────────────────────────────
# ⚡ ANIMACIONES
# ───────────────────────────────────────────────
animations {
    enabled = yes
    bezier = ease, 0.05, 0.9, 0.1, 1.0
    animation = windows, 1, 6, ease
    animation = border, 1, 10, ease
    animation = fade, 1, 6, ease
    animation = workspaces, 1, 5, ease
}

# ───────────────────────────────────────────────
# 🌫️ LAYER RULES (para blur y opacidad)
# ───────────────────────────────────────────────
layerrule = blur, dunst
layerrule = ignorealpha 0.6, dunst
layerrule = blur, notifications
layerrule = ignorealpha 0.6, notifications
layerrule = blur, wlogout
layerrule = ignorealpha 0.5, wlogout

# ───────────────────────────────────────────────
# 💻 AUTOEJECUCIÓN (AUTOSTART)
# ───────────────────────────────────────────────
exec-once = waybar                              # barra superior
exec-once = waypaper --restore                  # fondos de pantalla (animados)
exec-once = kanshi                              # perfiles multimonitor
exec-once = nm-applet --indicator               # icono de red
exec-once = blueman-applet                      # bluetooth
exec-once = dunst                               # notificaciones
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = swayidle -w timeout 600 'swaylock -f' timeout 900 'systemctl suspend' resume 'hyprctl dispatch dpms on' &
exec-once = starship init fish | source         # prompt bonito (opcional)

# ───────────────────────────────────────────────
# 🖼️ PAPEL TAPIZ (Hyprpaper / Waypaper)
# ───────────────────────────────────────────────
# Config en ~/.config/waypaper/config.ini
# Fondos en ~/Pictures/walls
# Para cambiarlo manualmente: waypaper

# ───────────────────────────────────────────────
# ⌨️ ATAJOS DE TECLADO
# ───────────────────────────────────────────────
$mod = SUPER

# 🖥️ Aplicaciones principales
bind = $mod, RETURN, exec, kitty
bind = $mod, D, exec, rofi -show drun
bind = $mod, C, exec, code
bind = $mod, S, exec, spotify
bind = $mod, W, exec, xdg-open https://web.whatsapp.com
bind = $mod, O, exec, obsidian
bind = $mod, E, exec, thunar
bind = $mod, B, exec, brave
bind = $mod, X, exec, wlogout
bind = $mod, L, exec, swaylock -f
bind = $mod, G, exec, waypaper

# 🪟 Ventanas
bind = $mod, Q, killactive,
bind = $mod, F, fullscreen,
bind = $mod, V, togglefloating,
bind = $mod, SPACE, togglefloating,
bind = $mod SHIFT, R, exec, hyprctl reload

# 🧭 Workspaces
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9
bind = $mod, 0, workspace, 10
bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5
bind = $mod SHIFT, 6, movetoworkspace, 6

# 🔍 Navegación entre ventanas
bind = $mod, H, movefocus, l
bind = $mod, L, movefocus, r
bind = $mod, K, movefocus, u
bind = $mod, J, movefocus, d

# 🧩 Mover ventana actual
bind = $mod SHIFT, H, movewindow, l
bind = $mod SHIFT, L, movewindow, r
bind = $mod SHIFT, K, movewindow, u
bind = $mod SHIFT, J, movewindow, d

# 🔧 Ratón
bindm = $mod, mouse:272, movewindow
bindm = $mod, mouse:273, resizewindow

# 📸 Capturas
bind = $mod, P, exec, grim -g "$(slurp)" - | wl-copy

# ───────────────────────────────────────────────
# 🪟 REGLAS DE VENTANA
# ───────────────────────────────────────────────
windowrule = float, pavucontrol
windowrule = float, blueman-manager
windowrule = float, nm-connection-editor
windowrule = size 800 600, pavucontrol
windowrule = center, pavucontrol
windowrule = center, blueman-manager
windowrule = float, wlogout
windowrule = center, wlogout

# ───────────────────────────────────────────────
# 🔔 NOTIFICACIONES (DUNST)
# ───────────────────────────────────────────────
# Se integra con blur y opacidad mediante layerrule
# Config en ~/.config/dunst/dunstrc

# ───────────────────────────────────────────────
# 🔒 BLOQUEO (SWAYLOCK)
# ───────────────────────────────────────────────
# Config en ~/.config/swaylock/config
# Bloqueo automático gestionado por swayidle (10min)

# ───────────────────────────────────────────────
# 🧱 WLOGOUT (menú de apagado)
# ───────────────────────────────────────────────
# Config en ~/.config/wlogout/layout y style.css
# Atajo: SUPER + X

# ───────────────────────────────────────────────
# 🧰 KANSHI (multi monitor)
# ───────────────────────────────────────────────
# Config en ~/.config/kanshi/config

# ───────────────────────────────────────────────
# 💬 FIN DE CONFIG
###############################################################
